import{g as U}from"./bezier-easing-BLJNtYhi.js";var T={},S={},y;function h(){return y||(y=1,function(g){(function(a,d){return d(g)})(S,function(a){var d=function(){var u=[];return function(i){return u[0]=(i&128)===128?"1":"0",u[1]=(i&64)===64?"1":"0",u[2]=(i&32)===32?"1":"0",u[3]=(i&16)===16?"1":"0",u[4]=(i&8)===8?"1":"0",u[5]=(i&4)===4?"1":"0",u[6]=(i&2)===2?"1":"0",u[7]=(i&1)===1?"1":"0",u.join("")}}();a.getFrameByteLength=function(u,i,e,r,t){var n=a.sampleLengthMap[r][t],o=e?t==="11"?4:1:0,s=u*1e3/8;return Math.floor(n*s/i+o)},a.getXingOffset=function(u,i){var e=i==="11";return u==="11"?e?21:36:e?13:21},a.v1l1Bitrates={"0000":"free","0001":32,"0010":64,"0011":96,"0100":128,"0101":160,"0110":192,"0111":224,1e3:256,1001:288,1010:320,1011:352,1100:384,1101:416,1110:448,1111:"bad"},a.v1l2Bitrates={"0000":"free","0001":32,"0010":48,"0011":56,"0100":64,"0101":80,"0110":96,"0111":112,1e3:128,1001:160,1010:192,1011:224,1100:256,1101:320,1110:384,1111:"bad"},a.v1l3Bitrates={"0000":"free","0001":32,"0010":40,"0011":48,"0100":56,"0101":64,"0110":80,"0111":96,1e3:112,1001:128,1010:160,1011:192,1100:224,1101:256,1110:320,1111:"bad"},a.v2l1Bitrates={"0000":"free","0001":32,"0010":48,"0011":56,"0100":64,"0101":80,"0110":96,"0111":112,1e3:128,1001:144,1010:160,1011:176,1100:192,1101:224,1110:256,1111:"bad"},a.v2l2Bitrates={"0000":"free","0001":8,"0010":16,"0011":24,"0100":32,"0101":40,"0110":48,"0111":56,1e3:64,1001:80,1010:96,1011:112,1100:128,1101:144,1110:160,1111:"bad"},a.v2l3Bitrates=a.v2l2Bitrates,a.v1SamplingRates={"00":44100,"01":48e3,10:32e3,11:"reserved"},a.v2SamplingRates={"00":22050,"01":24e3,10:16e3,11:"reserved"},a.v25SamplingRates={"00":11025,"01":12e3,10:8e3,11:"reserved"},a.channelModes={"00":"Stereo","01":"Joint stereo (Stereo)",10:"Dual channel (Stereo)",11:"Single channel (Mono)"},a.mpegVersionDescription={"00":"MPEG Version 2.5 (unofficial)","01":"reserved",10:"MPEG Version 2 (ISO/IEC 13818-3)",11:"MPEG Version 1 (ISO/IEC 11172-3)"},a.layerDescription={"00":"reserved","01":"Layer III",10:"Layer II",11:"Layer I"},a.bitrateMap={11:{"01":a.v1l3Bitrates,10:a.v1l2Bitrates,11:a.v1l1Bitrates},10:{"01":a.v2l3Bitrates,10:a.v2l2Bitrates,11:a.v2l1Bitrates}},a.samplingRateMap={"00":a.v25SamplingRates,10:a.v2SamplingRates,11:a.v1SamplingRates},a.v1SampleLengths={"01":1152,10:1152,11:384},a.v2SampleLengths={"01":576,10:1152,11:384},a.sampleLengthMap={"01":a.v2SampleLengths,10:a.v2SampleLengths,11:a.v1SampleLengths},a.wordSeqFromStr=function(u){for(var i=u.length-1,e=[];i>=0;--i)e[i]=u.charCodeAt(i);return e},a.seq={id3:a.wordSeqFromStr("ID3"),xing:a.wordSeqFromStr("Xing"),info:a.wordSeqFromStr("Info")},a.noOp=function(){},a.unsynchsafe=function(u){for(var i=0,e=2130706432;e;)i>>=1,i|=u&e,e>>=8;return i},a.isSeq=function(u,i,e){for(var r=u.length-1;r>=0;r--)if(u[r]!==i.getUint8(e+r))return!1;return!0},a.locateSeq=function(u,i,e,r){for(var t=0,n=r-u.length+1;t<n;++t)if(a.isSeq(u,i,e+t))return e+t;return-1},a.locateStrTrm={iso:function(u,i,e){return a.locateSeq([0],u,i,e)},ucs:function(u,i,e){var r=a.locateSeq([0,0],u,i,e);return r===-1?-1:((r-i)%2!==0&&++r,r)}},a.readStr={iso:function(u,i,e){return String.fromCharCode.apply(null,new Uint8Array(u.buffer,i,e))},ucs:function(u,i,e){(u.getUint16(i)===65534||u.getUint16(i)===65279)&&(i+=2,e-=2);var r=u.buffer;return i%2===1&&(r=r.slice(i,i+e),i=0),String.fromCharCode.apply(null,new Uint16Array(r,i,e/2))}},a.readTrmStr={iso:function(u,i,e){var r=a.locateStrTrm.iso(u,i,e);return r!==-1&&(e=r-i),a.readStr.iso(u,i,e)},ucs:function(u,i,e){var r=a.locateStrTrm.ucs(u,i,e);return r!==-1&&(e=r-i),a.readStr.ucs(u,i,e)}},a.readFrameHeader=function(u,i){if(i||(i=0),u.byteLength-i<=4)return null;var e=u.getUint8(i);if(e!==255)return null;var r=u.getUint8(i+1);if(r<224)return null;var t=d(r).substr(3,2),n=d(r).substr(5,2),o={_section:{type:"frameHeader",byteLength:4,offset:i},mpegAudioVersionBits:t,mpegAudioVersion:a.mpegVersionDescription[t],layerDescriptionBits:n,layerDescription:a.layerDescription[n],isProtected:r&1};if(o.protectionBit=o.isProtected?"1":"0",o.mpegAudioVersion==="reserved"||o.layerDescription==="reserved")return null;var s=u.getUint8(i+2);if(s=d(s),o.bitrateBits=s.substr(0,4),o.bitrate=a.bitrateMap[t][n][o.bitrateBits],o.bitrate==="bad"||(o.samplingRateBits=s.substr(4,2),o.samplingRate=a.samplingRateMap[t][o.samplingRateBits],o.samplingRate==="reserved"))return null;o.frameIsPaddedBit=s.substr(6,1),o.frameIsPadded=o.frameIsPaddedBit==="1",o.framePadding=o.frameIsPadded?1:0,o.privateBit=s.substr(7,1);var c=u.getUint8(i+3);return o.channelModeBits=d(c).substr(0,2),o.channelMode=a.channelModes[o.channelModeBits],o},a.readFrame=function(u,i,e){i||(i=0);var r={_section:{type:"frame",offset:i},header:a.readFrameHeader(u,i)},t=r.header;if(!t)return null;r._section.sampleLength=a.sampleLengthMap[t.mpegAudioVersionBits][t.layerDescriptionBits],r._section.byteLength=a.getFrameByteLength(t.bitrate,t.samplingRate,t.framePadding,t.mpegAudioVersionBits,t.layerDescriptionBits),r._section.nextFrameIndex=i+r._section.byteLength;var n=a.getXingOffset(t.mpegAudioVersionBits,t.channelModeBits);return a.isSeq(a.seq.xing,u,i+n)||a.isSeq(a.seq.info,u,i+n)||e&&!a.readFrameHeader(u,r._section.nextFrameIndex)?null:r}})}(S)),S}var l={},O;function C(){return O||(O=1,function(g){(function(a,d){return d(g,h())})(l,function(a,d){var u={AENC:"Audio encryption",APIC:"Attached picture",CHAP:"Chapter",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVAD:"Relative volume adjustment",RVRB:"Reverb",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMED:"Media type",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TYER:"Year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"},i={};i.T=function(e,r,t){var n={encoding:e.getUint8(r)};return n.value=d.readStr[n.encoding===0?"iso":"ucs"](e,r+1,t-1),n},i.TXXX=function(e,r,t){var n={encoding:e.getUint8(r)};if(t<2)return n;var o=n.encoding===0?"iso":"ucs",s=r+1,c=d.locateStrTrm[o](e,s,t-4);return c===-1||(n.description=d.readStr[o](e,s,c-s),c+=o==="ucs"?2:1,n.value=d.readStr[o](e,c,r+t-c)),n},i.W=function(e,r,t){return{value:d.readStr.iso(e,r,t)}},i.WXXX=function(e,r,t){var n={encoding:e.getUint8(r)};if(t<2)return n;var o=n.encoding===0?"iso":"ucs",s=r+1,c=d.locateStrTrm[o](e,s,t-4);return c===-1||(n.description=d.readStr[o](e,s,c-s),c+=o==="ucs"?2:1,n.value=d.readStr.iso(e,c,r+t-c)),n},i.COMM=function(e,r,t){var n={encoding:e.getUint8(r)};if(t<5)return n;var o=n.encoding===0?"iso":"ucs",s=r+4;n.language=d.readTrmStr.iso(e,r+1,3);var c=d.locateStrTrm[o](e,s,t-4);return c===-1||(n.description=d.readStr[o](e,s,c-s),c+=o==="ucs"?2:1,n.text=d.readStr[o](e,c,r+t-c)),n},i.UFID=function(e,r,t){var n=d.readTrmStr.iso(e,r,t),o=new DataView(e.buffer,r+n.length+1,t-n.length-1);return{ownerIdentifier:n,identifier:o}},i.IPLS=function(e,r,t){for(var n={encoding:e.getUint8(r),values:[]},o=n.encoding===0?"iso":"ucs",s=r+1,c;s<r+t;)c=d.locateStrTrm[o](e,s,t-(s-r)),c===-1&&(c=r+t),n.values.push(d.readStr[o](e,s,c-s)),s=c+(o==="ucs"?2:1);return n},i.USER=function(e,r,t){var n={encoding:e.getUint8(r)};if(t<5)return n;n.language=d.readTrmStr.iso(e,r+1,3);var o=r+4,s=n.encoding===0?"iso":"ucs";return n.text=d.readStr[s](e,o,r+t-o),n},i.PRIV=function(e,r,t){var n=d.readTrmStr.iso(e,r,t),o=new DataView(e.buffer,r+n.length+1,t-n.length-1);return{ownerIdentifier:n,privateData:o}},i.PCNT=function(e,r,t){return t<4?{}:{counter:e.getUint32(r)}},i.POPM=function(e,r,t){var n={email:d.readTrmStr.iso(e,r,t)};return r+=n.email.length+1,t<6||(n.rating=e.getUint8(r),n.counter=e.getUint32(r+1)),n},i.APIC=function(e,r,t){var n={encoding:e.getUint8(r)};if(t<4)return n;var o=n.encoding===0?"iso":"ucs",s,c;return s=r+1,c=d.locateStrTrm.iso(e,s,t-1),c===-1||(n.mimeType=d.readStr.iso(e,s,c-s),s=c+1,n.pictureType=e.getUint8(s),s+=1,c=d.locateStrTrm[o](e,s,r+t-s),c===-1)||(n.description=d.readStr[o](e,s,c-s),s=c+(o==="ucs"?2:1),n.pictureData=new DataView(e.buffer,s,r+t-s)),n},i.CHAP=function(e,r,t){var n={encoding:e.getUint8(r)},o=d.locateStrTrm.iso(e,r,t-1);if(o===-1)return n;n.id=d.readStr.iso(e,r,o-r),n.startTime=e.getUint32(o+1),n.endTime=e.getUint32(o+5),n.startOffset=e.getUint32(o+9),n.endOffset=e.getUint32(o+13);var s=o+17;for(n.frames=[];s<r+t;){var c=a.readId3v2TagFrame(e,s);n.frames.push(c),s+=c.header.size+10}return n},a.readId3v2TagFrame=function(e,r){var t={header:{id:d.readStr.iso(e,r,4),size:e.getUint32(r+4),flagsOctet1:e.getUint8(r+8),flagsOctet2:e.getUint8(r+9)}};if(t.header.size<1)return t;var n=function(o,s){return s==="TXXX"?o.TXXX:s.charAt(0)==="T"?o.T:s==="WXXX"?o.WXXX:s.charAt(0)==="W"?o.W:s==="COMM"||s==="USLT"?o.COMM:o[s]||d.noOp}(i,t.header.id);return t.name=u[t.header.id],t.content=n(e,r+10,t.header.size),t},a.readId3v2Tag=function(e,r){if(r||(r=0),e.byteLength-r<10||!d.isSeq(d.seq.id3,e,r))return null;var t=e.getUint8(r+5),n={_section:{type:"ID3v2",offset:r},header:{majorVersion:e.getUint8(r+3),minorRevision:e.getUint8(r+4),flagsOctet:t,unsynchronisationFlag:(t&128)===128,extendedHeaderFlag:(t&64)===64,experimentalIndicatorFlag:(t&32)===32,size:d.unsynchsafe(e.getUint32(r+6))},frames:[]};n._section.byteLength=n.header.size+10;var o=r+n._section.byteLength;if(n.header.majorVersion!==3)return n;var s;for(r+=10;r<o&&!(e.getUint32(r)===0||(s=a.readId3v2TagFrame(e,r),!s));)n.frames.push(s),r+=s.header.size+10;return n}})}(l)),l}var v={},L;function B(){return L||(L=1,function(g){(function(a,d){return d(g,h())})(v,function(a,d){a.readXingTag=function(u,i){i||(i=0);var e={_section:{type:"Xing",offset:i},header:d.readFrameHeader(u,i),vbrinfo:{}},r=e.header;if(!r)return null;var t=i+d.getXingOffset(r.mpegAudioVersionBits,r.channelModeBits);if(u.byteLength<t+4||(e.identifier=d.isSeq(d.seq.xing,u,t)&&"Xing"||d.isSeq(d.seq.info,u,t)&&"Info",!e.identifier))return null;let n=4,o=u.getUint32(t+n);if(n+=4,o&1&&(e.vbrinfo.frames_raw=u.getUint32(t+n),n+=4),o&2&&(e.vbrinfo.bytes_raw=u.getUint32(t+n),n+=4),o&4){e.vbrinfo.toc_raw=new Array(100);for(let p=0;p<100;++p)e.vbrinfo.toc_raw[p]=u.getUint8(t+n+p);n+=100}o&8&&(e.vbrinfo.vbr_scale_raw=u.getUint32(t+n),n+=4);let s=new Uint8Array(u.buffer,u.byteOffset+t+n,9);e.vbrinfo.lame_version=String.fromCharCode.apply(null,s),n+=21;let c=u.getUint8(t+n),f=u.getUint8(t+n+1),m=u.getUint8(t+n+2);return e.vbrinfo.ENC_DELAY=c<<4|f>>4,e.vbrinfo.ENC_PADDING=(f&15)<<8|m,(e.vbrinfo.ENC_DELAY<0||e.vbrinfo.ENC_DELAY>3e3)&&(e.vbrinfo.ENC_DELAY=-1),(e.vbrinfo.ENC_PADDING<0||e.vbrinfo.ENC_PADDING>3e3)&&(e.vbrinfo.ENC_PADDING=-1),e._section.byteLength=d.getFrameByteLength(r.bitrate,r.samplingRate,r.framePadding,r.mpegAudioVersionBits,r.layerDescriptionBits),e._section.nextFrameIndex=i+e._section.byteLength,e}})}(v)),v}var I;function F(){return I||(I=1,function(g){(function(a,d){return d(g,h(),C(),B())})(T,function(a,d,u,i){a.readFrameHeader=function(e,r){return d.readFrameHeader(e,r)},a.readFrame=function(e,r,t){return d.readFrame(e,r,t)},a.readLastFrame=function(e,r,t){r||(r=e.byteLength-1);for(var n=null;r>=0;--r)if(e.getUint8(r)===255&&(n=a.readFrame(e,r,t),n))return n;return null},a.readId3v2Tag=function(e,r){return u.readId3v2Tag(e,r)},a.readXingTag=function(e,r){return i.readXingTag(e,r)},a.readTags=function(e,r){r||(r=0);for(var t=[],n=null,o=!1,s=e.byteLength,c=[a.readId3v2Tag,a.readXingTag,a.readFrame],f=c.length;r<s&&!o;++r)for(var m=0;m<f;++m)if(n=c[m](e,r),n&&n._section.byteLength){if(t.push(n),r+=n._section.byteLength,n._section.type==="frame"){o=!0;break}m=-1}return t}})}(T)),T}var E=F();const M=U(E);export{M};
//# sourceMappingURL=unify-mp3-timing-BniELK9l.js.map
